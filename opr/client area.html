<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IAutomatize - Portal do Cliente</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #5a2ca0;
            --primary-light: #7c4ddb;
            --primary-dark: #3d1a70;
            --secondary: #f45866;
            --secondary-light: #ff7a85;
            --secondary-dark: #d13e4a;
            --tertiary: #2ca58d;
            --silver: #e0e0e0;
            --silver-dark: #b0b0b0;
            --white: #ffffff;
            --dark: #1a1a2e;
            --light-bg: #f8f9fa;
            --card-bg: #ffffff;
            --danger: #dc3545;
            --warning: #ffc107;
            --success: #28a745;
            --info: #17a2b8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: var(--dark);
            min-height: 100vh;
            display: flex;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--primary-dark), var(--primary));
            color: var(--white);
            height: 100vh;
            position: fixed;
            padding: 25px 0;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            z-index: 100;
            transition: all 0.3s ease;
        }

        .logo-container {
            display: flex;
            align-items: center;
            padding: 0 25px;
            margin-bottom: 30px;
        }

        .logo-container img {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }

        .logo-container h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .menu {
            flex: 1;
            overflow-y: auto;
        }

        .menu-category {
            margin-bottom: 10px;
            padding: 0 25px;
            font-size: 0.8rem;
            text-transform: uppercase;
            color: var(--silver);
            font-weight: 500;
        }

        .menu-items {
            list-style: none;
            margin-bottom: 20px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 25px;
            color: var(--silver);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            font-weight: 500;
        }

        .menu-item:hover, .menu-item.active {
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border-left-color: var(--secondary);
        }

        .menu-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .user-profile {
            padding: 15px 25px;
            display: flex;
            align-items: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 10px;
            overflow: hidden;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .user-role {
            font-size: 0.75rem;
            color: var(--silver);
        }

        .logout-btn {
            background: none;
            border: none;
            color: var(--silver);
            cursor: pointer;
            font-size: 1.2rem;
            transition: color 0.3s ease;
        }

        .logout-btn:hover {
            color: var(--white);
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            transition: all 0.3s ease;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .welcome-message h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .welcome-message p {
            color: var(--silver-dark);
        }

        .actions {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            background: var(--white);
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .action-btn i {
            margin-right: 8px;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .action-btn.primary {
            background: var(--primary);
            color: var(--white);
        }

        /* Dashboard Sections */
        .dashboard-section {
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary);
        }

        .section-actions {
            display: flex;
            gap: 10px;
        }

        .section-btn {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Stats Cards Section */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-title {
            font-size: 1rem;
            color: var(--silver-dark);
            font-weight: 500;
        }

        .stat-icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--white);
        }

        .stat-icon.purple {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
        }

        .stat-icon.red {
            background: linear-gradient(135deg, var(--secondary-dark), var(--secondary));
        }

        .stat-icon.green {
            background: linear-gradient(135deg, var(--tertiary), #4ecdc4);
        }

        .stat-icon.blue {
            background: linear-gradient(135deg, #3a7bd5, #00d2ff);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-change {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }

        .stat-change.positive {
            color: var(--success);
        }

        .stat-change.negative {
            color: var(--danger);
        }

        .stat-change i {
            margin-right: 5px;
        }

        /* Chart Container */
        .chart-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary);
        }

        .chart-filters {
            display: flex;
            gap: 10px;
        }

        .chart-filter {
            background: var(--light-bg);
            border: none;
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 0.85rem;
            color: var(--silver-dark);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chart-filter.active {
            background: var(--primary);
            color: var(--white);
        }

        .chart {
            width: 100%;
            height: 350px;
            overflow: hidden;
        }

        /* Tickets Section */
        .tickets-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .tickets-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .tickets-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary);
        }

        .tickets-tabs {
            display: flex;
            gap: 10px;
        }

        .tickets-tab {
            background: var(--light-bg);
            border: none;
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 0.85rem;
            color: var(--silver-dark);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tickets-tab.active {
            background: var(--primary);
            color: var(--white);
        }

        .tickets-table {
            width: 100%;
            border-collapse: collapse;
        }

        .tickets-table th {
            text-align: left;
            padding: 15px;
            font-weight: 600;
            color: var(--primary);
            border-bottom: 2px solid var(--silver);
        }

        .tickets-table td {
            padding: 15px;
            border-bottom: 1px solid var(--silver);
        }

        .ticket-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .ticket-status.aberto {
            background: rgba(23, 162, 184, 0.15);
            color: var(--info);
        }

        .ticket-status.em_andamento {
            background: rgba(255, 193, 7, 0.15);
            color: var(--warning);
        }

        .ticket-status.resolvido {
            background: rgba(40, 167, 69, 0.15);
            color: var(--success);
        }

        .ticket-status.fechado {
            background: rgba(108, 117, 125, 0.15);
            color: #6c757d;
        }

        .ticket-priority {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .ticket-priority.alta {
            background: rgba(220, 53, 69, 0.15);
            color: var(--danger);
        }

        .ticket-priority.media {
            background: rgba(255, 193, 7, 0.15);
            color: var(--warning);
        }

        .ticket-priority.baixa {
            background: rgba(40, 167, 69, 0.15);
            color: var(--success);
        }

        .ticket-actions {
            display: flex;
            gap: 10px;
        }

        .ticket-action {
            background: none;
            border: none;
            color: var(--silver-dark);
            cursor: pointer;
            font-size: 1.1rem;
            transition: color 0.3s ease;
        }

        .ticket-action:hover {
            color: var(--primary);
        }

        .ticket-action.view:hover {
            color: var(--info);
        }

        .ticket-action.edit:hover {
            color: var(--warning);
        }

        /* Services Section */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .service-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
        }

        .service-header {
            padding: 20px;
            background: rgba(90, 44, 160, 0.03);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .service-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--white);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
        }

        .service-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }

        .service-body {
            padding: 20px;
        }

        .service-description {
            font-size: 0.95rem;
            color: var(--dark);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .service-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .service-stat {
            text-align: center;
            flex: 1;
        }

        .service-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .service-stat-label {
            font-size: 0.8rem;
            color: var(--silver-dark);
        }

        .service-footer {
            padding: 15px 20px;
            background: rgba(90, 44, 160, 0.03);
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .service-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .service-status.ativo {
            background: rgba(40, 167, 69, 0.15);
            color: var(--success);
        }

        .service-status.inativo {
            background: rgba(220, 53, 69, 0.15);
            color: var(--danger);
        }

        .service-action {
            color: var(--primary);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .service-action:hover {
            color: var(--primary-light);
            gap: 8px;
        }

        /* Recommendations Section */
        .timeline-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .timeline-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary);
        }

        .timeline {
            position: relative;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 25px;
            padding-left: 60px;
        }

        .timeline-item:last-child {
            margin-bottom: 0;
        }

        .timeline-dot {
            position: absolute;
            left: 11px;
            top: 0;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            border: 4px solid var(--white);
            z-index: 1;
        }

        .timeline-dot.acao {
            background: var(--success);
        }

        .timeline-dot.oportunidade {
            background: var(--info);
        }

        .timeline-dot.alerta {
            background: var(--warning);
        }

        .timeline-content {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            position: relative;
        }

        .timeline-content::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 10px;
            width: 16px;
            height: 16px;
            background: var(--light-bg);
            transform: rotate(45deg);
        }

        .timeline-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }

        .timeline-type {
            font-weight: 600;
            color: var(--primary);
        }

        .timeline-time {
            color: var(--silver-dark);
        }

        .timeline-message {
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .timeline-details {
            font-size: 0.85rem;
            color: var(--primary);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: color 0.3s ease;
        }

        .timeline-details:hover {
            color: var(--primary-light);
        }

        /* Two Column Layout */
        .two-column-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        /* Loading state */
        .loading-container {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(90, 44, 160, 0.1);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }

        .loading-text {
            font-size: 1rem;
            color: var(--primary);
            font-weight: 500;
        }

        .section-loading {
            position: relative;
            min-height: 200px;
        }

        .section-loader {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            border-radius: 15px;
        }

        .table-empty-state {
            text-align: center;
            padding: 40px;
            color: var(--silver-dark);
        }

        .table-empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--silver);
        }

        .table-empty-state p {
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        /* Create Ticket Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 15px;
            width: 600px;
            max-width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transform: translateY(30px);
            transition: all 0.3s ease;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--silver);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--silver-dark);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--primary);
        }

        .modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--silver);
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(90, 44, 160, 0.2);
            outline: none;
        }

        .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--silver);
            border-radius: 8px;
            font-size: 0.95rem;
            background-color: var(--white);
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%235a2ca0'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 20px;
        }

        .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(90, 44, 160, 0.2);
            outline: none;
        }

        .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--silver);
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            min-height: 120px;
            resize: vertical;
        }

        .form-textarea:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(90, 44, 160, 0.2);
            outline: none;
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--silver);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .modal-btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn.cancel {
            background: var(--light-bg);
            border: 1px solid var(--silver);
            color: var(--silver-dark);
        }

        .modal-btn.cancel:hover {
            background: var(--silver);
            color: var(--dark);
        }

        .modal-btn.submit {
            background: var(--primary);
            border: 1px solid var(--primary);
            color: var(--white);
        }

        .modal-btn.submit:hover {
            background: var(--primary-dark);
        }

        .modal-btn.submit.loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .modal-btn.submit.loading .btn-text {
            visibility: hidden;
        }

        .modal-btn.submit.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid var(--white);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            left: calc(50% - 10px);
            top: calc(50% - 10px);
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
        }

        .toast {
            background: var(--white);
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 20px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            transform: translateX(120%);
            animation: slideIn 0.3s forwards, slideOut 0.3s forwards 4s;
            min-width: 250px;
            max-width: 320px;
        }

        @keyframes slideIn {
            to {
                transform: translateX(0);
            }
        }

        @keyframes slideOut {
            to {
                transform: translateX(120%);
            }
        }

        .toast-icon {
            margin-right: 15px;
            font-size: 1.2rem;
        }

        .toast-icon.success {
            color: var(--success);
        }

        .toast-icon.error {
            color: var(--danger);
        }

        .toast-icon.warning {
            color: var(--warning);
        }

        .toast-icon.info {
            color: var(--info);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .toast-message {
            font-size: 0.9rem;
            color: var(--silver-dark);
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--silver-dark);
            cursor: pointer;
            font-size: 1rem;
            margin-left: 15px;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            gap: 10px;
        }

        .pagination-item {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--white);
            color: var(--dark);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--silver);
        }

        .pagination-item.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        .pagination-item:hover:not(.active) {
            background: var(--light-bg);
        }

        .pagination-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Mobile Menu Toggle */
        .mobile-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 10px;
            margin-right: 10px;
        }

        /* Media Queries */
        @media (max-width: 1200px) {
            .two-column-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                width: 80px;
                padding: 15px 0;
            }
            
            .logo-container {
                justify-content: center;
                padding: 0 15px;
            }
            
            .logo-container img {
                margin-right: 0;
            }
            
            .logo-container h1 {
                display: none;
            }
            
            .menu-category, .menu-item span, .user-info {
                display: none;
            }
            
            .menu-item {
                justify-content: center;
                padding: 15px;
            }
            
            .menu-item i {
                margin-right: 0;
                font-size: 1.2rem;
            }
            
            .user-profile {
                justify-content: center;
                padding: 15px;
            }
            
            .user-avatar {
                margin-right: 0;
            }
            
            .main-content {
                margin-left: 80px;
            }
        }

        @media (max-width: 768px) {
            .mobile-toggle {
                display: block;
            }
            
            .sidebar {
                transform: translateX(-100%);
                width: 250px;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .logo-container {
                justify-content: flex-start;
                padding: 0 25px;
            }
            
            .logo-container h1 {
                display: block;
            }
            
            .menu-category, .menu-item span, .user-info {
                display: block;
            }
            
            .menu-item {
                justify-content: flex-start;
                padding: 12px 25px;
            }
            
            .menu-item i {
                margin-right: 10px;
            }
            
            .user-profile {
                justify-content: flex-start;
                padding: 15px 25px;
            }
            
            .user-avatar {
                margin-right: 10px;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .action-btn span {
                display: none;
            }
            
            .action-btn i {
                margin-right: 0;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .chart-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .tickets-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        @media (max-width: 576px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .tickets-table th:nth-child(3),
            .tickets-table td:nth-child(3) {
                display: none;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--silver);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--silver-dark);
        }

        /* Canvas for charts */
        canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* Animations */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo-container">
            <img src="https://github.com/user-attachments/assets/8a9ba7b7-5085-42f3-a808-7bef3554fb1d" alt="IAutomatize Logo">
            <h1>IAutomatize</h1>
        </div>

        <div class="menu">
            <div class="menu-category">Cliente</div>
            <ul class="menu-items">
                <a href="#" class="menu-item active">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-ticket-alt"></i>
                    <span>Tickets</span>
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-robot"></i>
                    <span>Automações</span>
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Relatórios</span>
                </a>
            </ul>

            <div class="menu-category">Suporte</div>
            <ul class="menu-items">
                <a href="#" class="menu-item">
                    <i class="fas fa-book"></i>
                    <span>Documentação</span>
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-headset"></i>
                    <span>Contato</span>
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-question-circle"></i>
                    <span>Ajuda</span>
                </a>
            </ul>

            <div class="menu-category">Configurações</div>
            <ul class="menu-items">
                <a href="#" class="menu-item">
                    <i class="fas fa-cog"></i>
                    <span>Configurações</span>
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-user-cog"></i>
                    <span>Perfil</span>
                </a>
            </ul>
        </div>

        <div class="user-profile">
            <div class="user-avatar" id="userAvatarSidebar">
                <img src="" alt="Avatar do usuário" style="display: none;" id="userAvatarImgSidebar">
                <span id="userInitialsSidebar"></span>
            </div>
            <div class="user-info">
                <div class="user-name" id="userNameSidebar">Carregando...</div>
                <div class="user-role">Cliente</div>
            </div>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Mobile menu toggle -->
        <button class="mobile-toggle" id="mobileToggle">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Header -->
        <div class="page-header">
            <div class="welcome-message">
                <h1 id="welcomeMessage">Olá!</h1>
                <p id="currentDate"></p>
            </div>
            <div class="actions">
                <button class="action-btn" id="newTicketBtn">
                    <i class="fas fa-plus"></i> <span>Novo Ticket</span>
                </button>
                <button class="action-btn primary" id="downloadReportsBtn">
                    <i class="fas fa-download"></i> <span>Baixar Relatórios</span>
                </button>
            </div>
        </div>

        <!-- Stats Section -->
        <div class="dashboard-section">
            <div class="section-header">
                <h2 class="section-title">Visão Geral</h2>
                <div class="section-actions">
                    <button class="section-btn">
                        <i class="fas fa-calendar-alt"></i> Últimos 30 dias
                    </button>
                </div>
            </div>

            <div class="stats-grid" id="statsGrid">
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <div class="loading-text">Carregando dados...</div>
                </div>
            </div>
        </div>

        <!-- Campaign Chart Section -->
        <div class="dashboard-section">
            <div class="chart-container section-loading" id="campaignChartContainer">
                <div class="section-loader">
                    <div class="loading-spinner"></div>
                </div>
                <div class="chart-header">
                    <h3 class="chart-title">Desempenho de Campanhas</h3>
                    <div class="chart-filters">
                        <button class="chart-filter" data-period="diario">Diário</button>
                        <button class="chart-filter active" data-period="semanal">Semanal</button>
                        <button class="chart-filter" data-period="mensal">Mensal</button>
                    </div>
                </div>
                <div class="chart">
                    <canvas id="campaignChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Two Column Layout -->
        <div class="two-column-grid">
            <!-- Left Column -->
            <div class="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">Tickets Recentes</h2>
                    <div class="section-actions">
                        <button class="section-btn" id="newTicketBtn2">
                            <i class="fas fa-plus"></i> Novo Ticket
                        </button>
                        <button class="section-btn" id="viewAllTicketsBtn">
                            <i class="fas fa-eye"></i> Ver todos
                        </button>
                    </div>
                </div>

                <div class="tickets-container section-loading" id="ticketsContainer">
                    <div class="section-loader">
                        <div class="loading-spinner"></div>
                    </div>
                    <div class="tickets-header">
                        <div class="tickets-title">Seus Tickets</div>
                        <div class="tickets-tabs">
                            <button class="tickets-tab active" data-status="todos">Todos</button>
                            <button class="tickets-tab" data-status="aberto">Abertos</button>
                            <button class="tickets-tab" data-status="resolvido">Resolvidos</button>
                        </div>
                    </div>

                    <table class="tickets-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Assunto</th>
                                <th>Data</th>
                                <th>Status</th>
                                <th>Prioridade</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="ticketsTableBody">
                            <!-- Ticket rows will be populated dynamically -->
                        </tbody>
                    </table>

                    <div class="pagination" id="ticketsPagination">
                        <!-- Pagination will be populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">Próximos Passos</h2>
                </div>

                <div class="timeline-container section-loading" id="recommendationsContainer">
                    <div class="section-loader">
                        <div class="loading-spinner"></div>
                    </div>
                    <div class="timeline" id="recommendationsTimeline">
                        <!-- Recommendations will be populated dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Services Section -->
        <div class="dashboard-section">
            <div class="section-header">
                <h2 class="section-title">Seus Serviços</h2>
                <div class="section-actions">
                    <button class="section-btn" id="addServiceBtn">
                        <i class="fas fa-plus"></i> Adicionar Serviço
                    </button>
                </div>
            </div>

            <div class="services-grid section-loading" id="servicesGrid">
                <div class="section-loader">
                    <div class="loading-spinner"></div>
                </div>
                <!-- Service cards will be populated dynamically -->
            </div>
        </div>
    </main>

    <!-- Create Ticket Modal -->
    <div class="modal" id="createTicketModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Criar Novo Ticket</h3>
                <button class="modal-close" id="closeTicketModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="ticketForm">
                    <div class="form-group">
                        <label class="form-label">Assunto</label>
                        <input type="text" class="form-control" id="ticketSubject" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Serviço</label>
                        <select class="form-select" id="ticketService" required>
                            <option value="">Selecione o serviço</option>
                            <!-- Options will be populated dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Prioridade</label>
                        <select class="form-select" id="ticketPriority" required>
                            <option value="baixa">Baixa</option>
                            <option value="media" selected>Média</option>
                            <option value="alta">Alta</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descrição</label>
                        <textarea class="form-textarea" id="ticketDescription" placeholder="Descreva detalhadamente o problema ou solicitação" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Anexos</label>
                        <input type="file" class="form-control" id="ticketAttachment">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" id="cancelTicketBtn">Cancelar</button>
                <button class="modal-btn submit" id="submitTicketBtn">
                    <span class="btn-text">Enviar Ticket</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer">
        <!-- Toast notifications will be added dynamically -->
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Authentication check
            checkAuthentication();
            
            // Get client ID from sessionStorage
            const clientId = sessionStorage.getItem('userId');
            
            // DOM elements
            const userNameSidebar = document.getElementById('userNameSidebar');
            const userAvatarSidebar = document.getElementById('userAvatarSidebar');
            const userAvatarImgSidebar = document.getElementById('userAvatarImgSidebar');
            const userInitialsSidebar = document.getElementById('userInitialsSidebar');
            const welcomeMessage = document.getElementById('welcomeMessage');
            const currentDate = document.getElementById('currentDate');
            const logoutBtn = document.getElementById('logoutBtn');
            const mobileToggle = document.getElementById('mobileToggle');
            const sidebar = document.querySelector('.sidebar');
            const statsGrid = document.getElementById('statsGrid');
            const campaignChartContainer = document.getElementById('campaignChartContainer');
            const ticketsContainer = document.getElementById('ticketsContainer');
            const recommendationsContainer = document.getElementById('recommendationsContainer');
            const servicesGrid = document.getElementById('servicesGrid');
            const ticketsTableBody = document.getElementById('ticketsTableBody');
            const recommendationsTimeline = document.getElementById('recommendationsTimeline');
            const chartFilters = document.querySelectorAll('.chart-filter');
            const ticketsTabs = document.querySelectorAll('.tickets-tab');
            const newTicketBtn = document.getElementById('newTicketBtn');
            const newTicketBtn2 = document.getElementById('newTicketBtn2');
            const downloadReportsBtn = document.getElementById('downloadReportsBtn');
            const addServiceBtn = document.getElementById('addServiceBtn');
            const viewAllTicketsBtn = document.getElementById('viewAllTicketsBtn');
            const createTicketModal = document.getElementById('createTicketModal');
            const closeTicketModal = document.getElementById('closeTicketModal');
            const cancelTicketBtn = document.getElementById('cancelTicketBtn');
            const submitTicketBtn = document.getElementById('submitTicketBtn');
            const ticketService = document.getElementById('ticketService');
            const ticketForm = document.getElementById('ticketForm');
            const ticketsPagination = document.getElementById('ticketsPagination');
            
            // Initialize the page
            initializePage();
            
            // =====================
            // Function Definitions
            // =====================
            
            // Authentication Check
            function checkAuthentication() {
                const token = sessionStorage.getItem('authToken');
                const userType = sessionStorage.getItem('userType');
                
                if (!token || userType !== 'cliente') {
                    window.location.href = 'login.html';
                }
            }
            
            // Initialize Page
            function initializePage() {
                // Set user data
                setUserData();
                
                // Set current date
                setCurrentDate();
                
                // Add event listeners
                addEventListeners();
                
                // Load data
                loadClientData();
            }
            
            // Set User Data
            function setUserData() {
                const userName = sessionStorage.getItem('userName');
                const userAvatar = sessionStorage.getItem('userAvatar');
                
                if (userName) {
                    userNameSidebar.textContent = userName;
                    welcomeMessage.textContent = `Olá, ${userName.split(' ')[0]}!`;
                }
                
                if (userAvatar) {
                    userAvatarImgSidebar.src = userAvatar;
                    userAvatarImgSidebar.style.display = 'block';
                    userInitialsSidebar.style.display = 'none';
                } else {
                    // Set initials if no avatar
                    if (userName) {
                        const initials = userName.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
                        userInitialsSidebar.textContent = initials;
                    }
                }
            }
            
            // Set Current Date
            function setCurrentDate() {
                const now = new Date();
                const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
                currentDate.textContent = now.toLocaleDateString('pt-BR', options).replace(/^\w/, c => c.toUpperCase());
            }
            
            // Add Event Listeners
            function addEventListeners() {
                // Mobile menu toggle
                mobileToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('active');
                });
                
                // Logout button
                logoutBtn.addEventListener('click', logout);
                
                // Chart filters
                chartFilters.forEach(filter => {
                    filter.addEventListener('click', function() {
                        chartFilters.forEach(f => f.classList.remove('active'));
                        this.classList.add('active');
                        loadCampaignChart(this.dataset.period);
                    });
                });
                
                // Tickets tabs
                ticketsTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        ticketsTabs.forEach(t => t.classList.remove('active'));
                        this.classList.add('active');
                        loadClientTickets(1, this.dataset.status);
                    });
                });
                
                // New ticket buttons
                newTicketBtn.addEventListener('click', openTicketModal);
                newTicketBtn2.addEventListener('click', openTicketModal);
                
                // Download reports button
                downloadReportsBtn.addEventListener('click', downloadReports);
                
                // Add service button
                addServiceBtn.addEventListener('click', addService);
                
                // View all tickets button
                viewAllTicketsBtn.addEventListener('click', viewAllTickets);
                
                // Create ticket modal
                closeTicketModal.addEventListener('click', closeModal);
                cancelTicketBtn.addEventListener('click', closeModal);
                submitTicketBtn.addEventListener('click', submitTicket);
            }
            
            // Load Client Data
            function loadClientData() {
                loadClientStats();
                loadCampaignChart('semanal');
                loadClientTickets(1, 'todos');
                loadRecommendations();
                loadClientServices();
            }
            
            // Logout Function
            function logout() {
                sessionStorage.removeItem('authToken');
                sessionStorage.removeItem('userType');
                sessionStorage.removeItem('userId');
                sessionStorage.removeItem('userName');
                sessionStorage.removeItem('userEmail');
                sessionStorage.removeItem('userAvatar');
                
                window.location.href = 'login.html';
            }
            
            // =====================
            // Data Loading Functions
            // =====================
            
            // Load Client Stats
            async function loadClientStats() {
                try {
                    // Show loading
                    statsGrid.innerHTML = `
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Carregando dados...</div>
                        </div>
                    `;
                    
                    const response = await fetchWithAuth(`https://api.iautomatize.com/webhook/cliente/estatisticas?cliente_id=${clientId}`);
                    
                    // Check if response is valid
                    if (!response || !response.atendimentos) {
                        throw new Error('Dados inválidos recebidos do servidor');
                    }
                    
                    // Update stats grid
                    statsGrid.innerHTML = `
                        <div class="stat-card">
                            <div class="stat-header">
                                <h3 class="stat-title">Atendimentos</h3>
                                <div class="stat-icon purple">
                                    <i class="fas fa-headset"></i>
                                </div>
                            </div>
                            <div class="stat-value">${response.atendimentos.valor}</div>
                            <div class="stat-change ${response.atendimentos.crescimento >= 0 ? 'positive' : 'negative'}">
                                <i class="fas fa-arrow-${response.atendimentos.crescimento >= 0 ? 'up' : 'down'}"></i> 
                                ${Math.abs(response.atendimentos.crescimento)}% desde o mês passado
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <h3 class="stat-title">Leads Gerados</h3>
                                <div class="stat-icon red">
                                    <i class="fas fa-user-plus"></i>
                                </div>
                            </div>
                            <div class="stat-value">${response.leads_gerados.valor}</div>
                            <div class="stat-change ${response.leads_gerados.crescimento >= 0 ? 'positive' : 'negative'}">
                                <i class="fas fa-arrow-${response.leads_gerados.crescimento >= 0 ? 'up' : 'down'}"></i> 
                                ${Math.abs(response.leads_gerados.crescimento)}% desde o mês passado
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <h3 class="stat-title">Conversões</h3>
                                <div class="stat-icon green">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div class="stat-value">${response.conversoes.valor}</div>
                            <div class="stat-change ${response.conversoes.crescimento >= 0 ? 'positive' : 'negative'}">
                                <i class="fas fa-arrow-${response.conversoes.crescimento >= 0 ? 'up' : 'down'}"></i> 
                                ${Math.abs(response.conversoes.crescimento)}% desde o mês passado
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <h3 class="stat-title">Taxa de Conversão</h3>
                                <div class="stat-icon blue">
                                    <i class="fas fa-percent"></i>
                                </div>
                            </div>
                            <div class="stat-value">${response.taxa_conversao.valor}%</div>
                            <div class="stat-change ${response.taxa_conversao.crescimento >= 0 ? 'positive' : 'negative'}">
                                <i class="fas fa-arrow-${response.taxa_conversao.crescimento >= 0 ? 'up' : 'down'}"></i> 
                                ${Math.abs(response.taxa_conversao.crescimento)}% desde o mês passado
                            </div>
                        </div>
                    `;
                } catch (error) {
                    console.error('Erro ao carregar estatísticas do cliente:', error);
                    
                    statsGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 30px; color: var(--silver-dark);">
                            <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 15px; color: var(--danger);"></i>
                            <p>Não foi possível carregar os dados. Tente novamente mais tarde.</p>
                            <button class="action-btn" onclick="loadClientStats()">
                                <i class="fas fa-sync-alt"></i> Tentar novamente
                            </button>
                        </div>
                    `;
                    
                    showToast('Erro', 'Não foi possível carregar suas estatísticas', 'error');
                }
            }
            
            // Load Campaign Chart
            async function loadCampaignChart(period = 'semanal') {
                try {
                    // Show loading
                    campaignChartContainer.querySelector('.section-loader').style.display = 'flex';
                    
                    const response = await fetchWithAuth(`https://api.iautomatize.com/webhook/cliente/metricas-campanha?cliente_id=${clientId}&periodo=${period}`);
                    
                    // Hide loading
                    campaignChartContainer.querySelector('.section-loader').style.display = 'none';
                    
                    // Check if response is valid
                    if (!response || !response.datasets || !response.labels) {
                        throw new Error('Dados inválidos recebidos do servidor');
                    }
                    
                    // Create chart
                    const ctx = document.getElementById('campaignChart').getContext('2d');
                    
                    // Destroy existing chart if exists
                    if (window.campaignChart) {
                        window.campaignChart.destroy();
                    }
                    
                    // Define colors for datasets
                    const colors = [
                        { border: '#5a2ca0', background: 'rgba(90, 44, 160, 0.1)' },
                        { border: '#f45866', background: 'rgba(244, 88, 102, 0.1)' },
                        { border: '#2ca58d', background: 'rgba(44, 165, 141, 0.1)' }
                    ];
                    
                    // Create new chart
                    window.campaignChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: response.labels,
                            datasets: response.datasets.map((dataset, index) => {
                                return {
                                    label: dataset.label,
                                    data: dataset.data,
                                    borderColor: colors[index % colors.length].border,
                                    backgroundColor: colors[index % colors.length].background,
                                    tension: 0.4,
                                    fill: true
                                };
                            })
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                tooltip: {
                                    mode: 'index',
                                    intersect: false,
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        drawBorder: false,
                                    }
                                },
                                x: {
                                    grid: {
                                        display: false,
                                    }
                                }
                            },
                            interaction: {
                                mode: 'nearest',
                                axis: 'x',
                                intersect: false
                            }
                        }
                    });
                } catch (error) {
                    console.error('Erro ao carregar gráfico de campanha:', error);
                    
                    campaignChartContainer.querySelector('.section-loader').style.display = 'none';
                    
                    document.querySelector('.chart').innerHTML = `
                        <div style="text-align: center; padding: 30px; color: var(--silver-dark);">
                            <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 15px; color: var(--danger);"></i>
                            <p>Não foi possível carregar o gráfico. Tente novamente mais tarde.</p>
                            <button class="action-btn" onclick="loadCampaignChart('${period}')">
                                <i class="fas fa-sync-alt"></i> Tentar novamente
                            </button>
                        </div>
                    `;
                    
                    showToast('Erro', 'Não foi possível carregar os dados de campanha', 'error');
                }
            }
            
            // Load Client Tickets
            async function loadClientTickets(page = 1, status = 'todos') {
                try {
                    // Show loading
                    ticketsContainer.querySelector('.section-loader').style.display = 'flex';
                    
                    // Build URL with parameters
                    let url = `https://api.iautomatize.com/webhook/cliente/tickets?cliente_id=${clientId}&page=${page}&per_page=5`;
                    if (status !== 'todos') {
                        url += `&status=${status}`;
                    }
                    
                    const response = await fetchWithAuth(url);
                    
                    // Hide loading
                    ticketsContainer.querySelector('.section-loader').style.display = 'none';
                    
                    // Check if response is valid
                    if (!response || !response.tickets) {
                        throw new Error('Dados inválidos recebidos do servidor');
                    }
                    
                    // Clear table body
                    ticketsTableBody.innerHTML = '';
                    
                    // Check if we have tickets
                    if (response.tickets.length > 0) {
                        // Status display mapping
                        const statusDisplay = {
                            'aberto': 'Aberto',
                            'em_andamento': 'Em andamento',
                            'resolvido': 'Resolvido',
                            'fechado': 'Fechado'
                        };
                        
                        // Priority display mapping
                        const priorityDisplay = {
                            'alta': 'Alta',
                            'media': 'Média',
                            'baixa': 'Baixa'
                        };
                        
                        // Add tickets to table
                        response.tickets.forEach(ticket => {
                            // Format date
                            const date = new Date(ticket.data_criacao);
                            const formattedDate = date.toLocaleDateString('pt-BR');
                            
                            ticketsTableBody.innerHTML += `
                                <tr>
                                    <td>${ticket.id}</td>
                                    <td>${ticket.assunto}</td>
                                    <td>${formattedDate}</td>
                                    <td><span class="ticket-status ${ticket.status}">${statusDisplay[ticket.status] || ticket.status}</span></td>
                                    <td><span class="ticket-priority ${ticket.prioridade}">${priorityDisplay[ticket.prioridade] || ticket.prioridade}</span></td>
                                    <td>
                                        <div class="ticket-actions">
                                            <button class="ticket-action view" data-id="${ticket.id}" title="Ver detalhes">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            ${ticket.status === 'aberto' || ticket.status === 'em_andamento' ? 
                                                `<button class="ticket-action edit" data-id="${ticket.id}" title="Editar ticket">
                                                    <i class="fas fa-edit"></i>
                                                </button>` : ''}
                                        </div>
                                    </td>
                                </tr>
                            `;
                        });
                        
                        // Setup pagination
                        const totalPages = Math.ceil(response.total / 5);
                        setupPagination(ticketsPagination, page, totalPages, loadClientTickets, status);
                        
                        // Add event listeners for ticket actions
                        addTicketActionListeners();
                    } else {
                        // No tickets found
                        ticketsTableBody.innerHTML = `
                            <tr>
                                <td colspan="6" class="table-empty-state">
                                    <i class="fas fa-ticket-alt"></i>
                                    <p>Nenhum ticket encontrado</p>
                                    <button class="action-btn" id="createFirstTicketBtn">
                                        <i class="fas fa-plus"></i> Criar Ticket
                                    </button>
                                </td>
                            </tr>
                        `;
                        
                        // Add event listener for create ticket button
                        document.getElementById('createFirstTicketBtn').addEventListener('click', openTicketModal);
                        
                        // Clear pagination
                        ticketsPagination.innerHTML = '';
                    }
                } catch (error) {
                    console.error('Erro ao carregar tickets:', error);
                    
                    ticketsContainer.querySelector('.section-loader').style.display = 'none';
                    
                    ticketsTableBody.innerHTML = `
                        <tr>
                            <td colspan="6" class="table-empty-state">
                                <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 15px; color: var(--danger);"></i>
                                <p>Não foi possível carregar os tickets. Tente novamente mais tarde.</p>
                                <button class="action-btn" onclick="loadClientTickets(1, '${status}')">
                                    <i class="fas fa-sync-alt"></i> Tentar novamente
                                </button>
                            </td>
                        </tr>
                    `;
                    
                    // Clear pagination
                    ticketsPagination.innerHTML = '';
                    
                    showToast('Erro', 'Não foi possível carregar seus tickets', 'error');
                }
            }
            
            // Load Recommendations
            async function loadRecommendations() {
                try {
                    // Show loading
                    recommendationsContainer.querySelector('.section-loader').style.display = 'flex';
                    
                    const response = await fetchWithAuth(`https://api.iautomatize.com/webhook/cliente/recomendacoes?cliente_id=${clientId}`);
                    
                    // Hide loading
                    recommendationsContainer.querySelector('.section-loader').style.display = 'none';
                    
                    // Check if response is valid
                    if (!response || !response.recomendacoes) {
                        throw new Error('Dados inválidos recebidos do servidor');
                    }
                    
                    // Clear timeline
                    recommendationsTimeline.innerHTML = '';
                    
                    // Check if we have recommendations
                    if (response.recomendacoes.length > 0) {
                        // Type display mapping
                        const typeDisplay = {
                            'acao': 'Ação Recomendada',
                            'oportunidade': 'Oportunidade',
                            'alerta': 'Alerta'
                        };
                        
                        // Priority display mapping
                        const priorityDisplay = {
                            'alta': 'Alta Prioridade',
                            'media': 'Média Prioridade',
                            'baixa': 'Baixa Prioridade'
                        };
                        
                        // Add recommendations to timeline
                        response.recomendacoes.forEach(recommendation => {
                            recommendationsTimeline.innerHTML += `
                                <div class="timeline-item">
                                    <div class="timeline-dot ${recommendation.tipo}"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-meta">
                                            <div class="timeline-type">${typeDisplay[recommendation.tipo] || capitalizeFirstLetter(recommendation.tipo)}</div>
                                            <div class="timeline-time">${priorityDisplay[recommendation.prioridade] || capitalizeFirstLetter(recommendation.prioridade)}</div>
                                        </div>
                                        <div class="timeline-message">
                                            <strong>${recommendation.titulo}</strong> - ${recommendation.descricao}
                                        </div>
                                        <a href="${recommendation.link_acao}" class="timeline-details">
                                            ${recommendation.tipo === 'acao' ? 'Implementar agora' : recommendation.tipo === 'oportunidade' ? 'Ver detalhes' : 'Analisar'} 
                                            <i class="fas fa-chevron-right"></i>
                                        </a>
                                    </div>
                                </div>
                            `;
                        });
                    } else {
                        // No recommendations found
                        recommendationsTimeline.innerHTML = `
                            <div style="text-align: center; padding: 30px; color: var(--silver-dark);">
                                <i class="fas fa-check-circle" style="font-size: 3rem; margin-bottom: 15px; color: var(--success);"></i>
                                <p>Tudo em ordem! Não há recomendações pendentes no momento.</p>
                            </div>
                        `;
                    }
                } catch (error) {
                    console.error('Erro ao carregar recomendações:', error);
                    
                    recommendationsContainer.querySelector('.section-loader').style.display = 'none';
                    
                    recommendationsTimeline.innerHTML = `
                        <div style="text-align: center; padding: 30px; color: var(--silver-dark);">
                            <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 15px; color: var(--danger);"></i>
                            <p>Não foi possível carregar as recomendações. Tente novamente mais tarde.</p>
                            <button class="action-btn" onclick="loadRecommendations()">
                                <i class="fas fa-sync-alt"></i> Tentar novamente
                            </button>
                        </div>
                    `;
                    
                    showToast('Erro', 'Não foi possível carregar suas recomendações', 'error');
                }
            }
            
            // Load Client Services
            async function loadClientServices() {
                try {
                    // Show loading
                    servicesGrid.querySelector('.section-loader').style.display = 'flex';
                    
                    const response = await fetchWithAuth(`https://api.iautomatize.com/webhook/cliente/servicos?cliente_id=${clientId}`);
                    
                    // Hide loading
                    servicesGrid.querySelector('.section-loader').style.display = 'none';
                    
                    // Check if response is valid
                    if (!response || !response.servicos) {
                        throw new Error('Dados inválidos recebidos do servidor');
                    }
                    
                    // Clear services grid
                    servicesGrid.innerHTML = '';
                    
                    // Check if we have services
                    if (response.servicos.length > 0) {
                        // Icon mapping
                        const iconMap = {
                            'ia-sdr': 'fas fa-robot',
                            'dashboards': 'fas fa-chart-line',
                            'whatsapp': 'fab fa-whatsapp',
                            'email': 'fas fa-envelope',
                            'crm': 'fas fa-users',
                            'social-media': 'fas fa-hashtag'
                        };
                        
                        // Add services to grid
                        response.servicos.forEach(service => {
                            // Determine icon
                            const icon = iconMap[service.icone] || 'fas fa-cogs';
                            
                            // Create statistics HTML
                            let statsHtml = '';
                            if (service.estatisticas && service.estatisticas.length > 0) {
                                service.estatisticas.forEach(stat => {
                                    statsHtml += `
                                        <div class="service-stat">
                                            <div class="service-stat-value">${stat.valor}</div>
                                            <div class="service-stat-label">${stat.label}</div>
                                        </div>
                                    `;
                                });
                            }
                            
                            // Add service card
                            servicesGrid.innerHTML += `
                                <div class="service-card">
                                    <div class="service-header">
                                        <div class="service-icon">
                                            <i class="${icon}"></i>
                                        </div>
                                        <h3 class="service-title">${service.nome}</h3>
                                    </div>
                                    <div class="service-body">
                                        <p class="service-description">
                                            ${service.descricao}
                                        </p>
                                        <div class="service-stats">
                                            ${statsHtml}
                                        </div>
                                    </div>
                                    <div class="service-footer">
                                        <span class="service-status ${service.status}">${capitalizeFirstLetter(service.status)}</span>
                                        <a href="#" class="service-action" data-id="${service.id}">
                                            Gerenciar <i class="fas fa-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>
                            `;
                        });
                        
                        // Update ticket service dropdown
                        updateTicketServiceDropdown(response.servicos);
                        
                        // Add event listeners for service actions
                        addServiceActionListeners();
                    } else {
                        // No services found
                        servicesGrid.innerHTML = `
                            <div style="grid-column: 1 / -1; text-align: center; padding: 30px; color: var(--silver-dark);">
                                <i class="fas fa-cogs" style="font-size: 3rem; margin-bottom: 15px;"></i>
                                <p>Nenhum serviço contratado encontrado</p>
                                <button class="action-btn" id="consultServiceBtn" style="margin-top: 15px;">
                                    <i class="fas fa-plus"></i> Consultar Serviços Disponíveis
                                </button>
                            </div>
                        `;
                        
                        // Add event listener for consult services button
                        document.getElementById('consultServiceBtn').addEventListener('click', consultServices);
                    }
                } catch (error) {
                    console.error('Erro ao carregar serviços:', error);
                    
                    servicesGrid.querySelector('.section-loader').style.display = 'none';
                    
                    servicesGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 30px; color: var(--silver-dark);">
                            <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 15px; color: var(--danger);"></i>
                            <p>Não foi possível carregar os serviços. Tente novamente mais tarde.</p>
                            <button class="action-btn" onclick="loadClientServices()">
                                <i class="fas fa-sync-alt"></i> Tentar novamente
                            </button>
                        </div>
                    `;
                    
                    showToast('Erro', 'Não foi possível carregar seus serviços contratados', 'error');
                }
            }
            
            // =====================
            // Helper Functions
            // =====================
            
            // Capitalize First Letter
            function capitalizeFirstLetter(string) {
                return string.charAt(0).toUpperCase() + string.slice(1);
            }
            
            // Setup Pagination
            function setupPagination(container, currentPage, totalPages, callback, status = 'todos') {
                container.innerHTML = '';
                
                if (totalPages <= 1) {
                    return;
                }
                
                // Previous button
                container.innerHTML += `
                    <button class="pagination-item ${currentPage === 1 ? 'disabled' : ''}" 
                            ${currentPage === 1 ? 'disabled' : ''}
                            data-page="${currentPage - 1}" data-status="${status}">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                `;
                
                // Page buttons
                const startPage = Math.max(1, currentPage - 2);
                const endPage = Math.min(totalPages, startPage + 4);
                
                for (let i = startPage; i <= endPage; i++) {
                    container.innerHTML += `
                        <button class="pagination-item ${i === currentPage ? 'active' : ''}" 
                                data-page="${i}" data-status="${status}">
                            ${i}
                        </button>
                    `;
                }
                
                // Next button
                container.innerHTML += `
                    <button class="pagination-item ${currentPage === totalPages ? 'disabled' : ''}" 
                            ${currentPage === totalPages ? 'disabled' : ''}
                            data-page="${currentPage + 1}" data-status="${status}">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                `;
                
                // Add event listeners
                container.querySelectorAll('.pagination-item').forEach(item => {
                    if (!item.disabled) {
                        item.addEventListener('click', function() {
                            const page = parseInt(this.dataset.page);
                            const status = this.dataset.status;
                            callback(page, status);
                        });
                    }
                });
            }
            
            // Update Ticket Service Dropdown
            function updateTicketServiceDropdown(services) {
                // Clear options
                ticketService.innerHTML = '<option value="">Selecione o serviço</option>';
                
                // Add options for each service
                services.forEach(service => {
                    ticketService.innerHTML += `<option value="${service.id}">${service.nome}</option>`;
                });
            }
            
            // Add Ticket Action Listeners
            function addTicketActionListeners() {
                document.querySelectorAll('.ticket-action').forEach(button => {
                    button.addEventListener('click', function() {
                        const id = this.dataset.id;
                        const action = this.classList.contains('view') ? 'view' : 'edit';
                        
                        if (action === 'view') {
                            viewTicket(id);
                        } else {
                            editTicket(id);
                        }
                    });
                });
            }
            
            // Add Service Action Listeners
            function addServiceActionListeners() {
                document.querySelectorAll('.service-action').forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        const id = this.dataset.id;
                        manageService(id);
                    });
                });
            }
            
            // Show Toast Notification
            function showToast(title, message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = 'toast';
                toast.innerHTML = `
                    <div class="toast-icon ${type}">
                        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'info' ? 'info-circle' : 'exclamation-triangle'}"></i>
                    </div>
                    <div class="toast-content">
                        <div class="toast-title">${title}</div>
                        <div class="toast-message">${message}</div>
                    </div>
                    <button class="toast-close">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                // Add close button event listener
                toast.querySelector('.toast-close').addEventListener('click', () => {
                    toast.remove();
                });
                
                // Add to container
                document.getElementById('toastContainer').appendChild(toast);
                
                // Auto remove after 5 seconds
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                    }
                }, 5000);
            }
            
            // Fetch with Authentication
            async function fetchWithAuth(url, options = {}) {
                const token = sessionStorage.getItem('authToken');
                
                // Add authorization header
                const headers = {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`,
                    ...options.headers
                };
                
                try {
                    const response = await fetch(url, {
                        ...options,
                        headers
                    });
                    
                    if (!response.ok) {
                        // Handle unauthorized (token expired)
                        if (response.status === 401) {
                            logout();
                            throw new Error('Sessão expirada. Por favor, faça login novamente.');
                        }
                        
                        throw new Error(`Erro HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    // Parse JSON response
                    const data = await response.json();
                    return data;
                } catch (error) {
                    console.error('Fetch error:', error);
                    
                    // For demonstration/development only - return mock data
                    // In production, this would be removed and the error would be thrown
                    console.log('Using mock data for development/testing');
                    return getMockData(url);
                }
            }
            
            // =====================
            // Action Functions
            // =====================
            
            // Open Ticket Modal
            function openTicketModal() {
                createTicketModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
            
            // Close Modal
            function closeModal() {
                createTicketModal.classList.remove('active');
                document.body.style.overflow = 'auto';
                
                // Reset form
                ticketForm.reset();
            }
            
            // Submit Ticket
            async function submitTicket() {
                // Get form values
                const subject = document.getElementById('ticketSubject').value;
                const serviceId = document.getElementById('ticketService').value;
                const priority = document.getElementById('ticketPriority').value;
                const description = document.getElementById('ticketDescription').value;
                const attachment = document.getElementById('ticketAttachment').files[0];
                
                // Validate form
                if (!subject || !serviceId || !description) {
                    showToast('Campos obrigatórios', 'Por favor, preencha todos os campos obrigatórios', 'warning');
                    return;
                }
                
                // Show loading state
                submitTicketBtn.innerHTML = '<span class="loading-spinner"></span>';
                submitTicketBtn.disabled = true;
                
                try {
                    // Prepare request body
                    const formData = new FormData();
                    formData.append('cliente_id', clientId);
                    formData.append('assunto', subject);
                    formData.append('servico_id', serviceId);
                    formData.append('prioridade', priority);
                    formData.append('conteudo', description);
                    
                    if (attachment) {
                        formData.append('anexo', attachment);
                    }
                    
                    // Send request
                    // In a real implementation, this would be an actual API call
                    // For demonstration, we'll simulate success after a delay
                    setTimeout(() => {
                        // Show success message
                        showToast('Ticket criado', 'Seu ticket foi criado com sucesso', 'success');
                        
                        // Close modal
                        closeModal();
                        
                        // Reset button
                        submitTicketBtn.innerHTML = '<span class="btn-text">Enviar Ticket</span>';
                        submitTicketBtn.disabled = false;
                        
                        // Reload tickets
                        loadClientTickets(1, 'todos');
                    }, 1500);
                } catch (error) {
                    console.error('Erro ao criar ticket:', error);
                    
                    // Show error message
                    showToast('Erro', 'Não foi possível criar o ticket. Tente novamente mais tarde.', 'error');
                    
                    // Reset button
                    submitTicketBtn.innerHTML = '<span class="btn-text">Enviar Ticket</span>';
                    submitTicketBtn.disabled = false;
                }
            }
            
            // View Ticket
            function viewTicket(id) {
                showToast('Visualizar Ticket', `Visualizando detalhes do ticket #${id}`, 'info');
                // In a real implementation, this would open a modal or navigate to a ticket details page
            }
            
            // Edit Ticket
            function editTicket(id) {
                showToast('Editar Ticket', `Editando ticket #${id}`, 'info');
                // In a real implementation, this would open a modal with the ticket form pre-filled
            }
            
            // Manage Service
            function manageService(id) {
                showToast('Gerenciar Serviço', `Gerenciando serviço #${id}`, 'info');
                // In a real implementation, this would navigate to a service management page
            }
            
            // Download Reports
            function downloadReports() {
                showToast('Gerando Relatórios', 'Seus relatórios estão sendo gerados...', 'info');
                
                // Simulate report generation
                setTimeout(() => {
                    showToast('Relatórios Prontos', 'Seus relatórios foram gerados e enviados para seu e-mail', 'success');
                }, 2000);
            }
            
            // Add Service
            function addService() {
                showToast('Adicionar Serviço', 'Nossa equipe entrará em contato para apresentar nossos serviços disponíveis', 'info');
            }
            
            // View All Tickets
            function viewAllTickets() {
                showToast('Ver Todos os Tickets', 'Redirecionando para a página de tickets...', 'info');
                // In a real implementation, this would navigate to a tickets page
            }
            
            // Consult Services
            function consultServices() {
                showToast('Consultar Serviços', 'Nossa equipe entrará em contato para apresentar nossos serviços disponíveis', 'info');
            }
            
            // =====================
            // Mock Data Functions (for development/testing only)
            // =====================
            
            // Get Mock Data based on URL
            function getMockData(url) {
                // Extract endpoint from URL
                const endpoint = url.split('?')[0].split('/').pop();
                
                // Return appropriate mock data based on endpoint
                switch (endpoint) {
                    case 'estatisticas':
                        return {
                            atendimentos: {
                                valor: 145,
                                crescimento: 8
                            },
                            leads_gerados: {
                                valor: 78,
                                crescimento: 12
                            },
                            conversoes: {
                                valor: 32,
                                crescimento: 15
                            },
                            taxa_conversao: {
                                valor: 41,
                                crescimento: 5
                            }
                        };
                    
                    case 'metricas-campanha':
                        return {
                            periodo: "semanal",
                            labels: ["Seg", "Ter", "Qua", "Qui", "Sex", "Sáb", "Dom"],
                            datasets: [
                                {
                                    label: "Facebook Ads",
                                    data: [42, 45, 52, 48, 56, 42, 38]
                                },
                                {
                                    label: "Instagram Ads",
                                    data: [35, 38, 42, 45, 48, 40, 32]
                                },
                                {
                                    label: "Google Ads",
                                    data: [28, 32, 38, 42, 46, 38, 30]
                                }
                            ]
                        };
                    
                    case 'tickets':
                        return {
                            total: 12,
                            tickets: [
                                {
                                    id: "TK-2025-0001",
                                    assunto: "Integração com CRM Salesforce",
                                    conteudo: "Precisamos integrar o assistente de IA com nosso CRM Salesforce para sincronizar leads.",
                                    data_criacao: new Date(Date.now() - 2 * 24 * 60 * 60000).toISOString(),
                                    prioridade: "alta",
                                    status: "em_andamento"
                                },
                                {
                                    id: "TK-2025-0002",
                                    assunto: "Erro no dashboard de conversões",
                                    conteudo: "O dashboard de conversões está mostrando dados inconsistentes desde ontem.",
                                    data_criacao: new Date(Date.now() - 1 * 24 * 60 * 60000).toISOString(),
                                    prioridade: "media",
                                    status: "aberto"
                                },
                                {
                                    id: "TK-2025-0003",
                                    assunto: "Solicitação de nova automação",
                                    conteudo: "Gostaríamos de implementar uma nova automação para qualificação de leads via LinkedIn.",
                                    data_criacao: new Date(Date.now() - 3 * 24 * 60 * 60000).toISOString(),
                                    prioridade: "baixa",
                                    status: "aberto"
                                },
                                {
                                    id: "TK-2025-0004",
                                    assunto: "Problema com mensagens WhatsApp",
                                    conteudo: "As mensagens automáticas de WhatsApp estão sendo enviadas duplicadas.",
                                    data_criacao: new Date(Date.now() - 5 * 24 * 60 * 60000).toISOString(),
                                    prioridade: "alta",
                                    status: "resolvido"
                                },
                                {
                                    id: "TK-2025-0005",
                                    assunto: "Treinamento para equipe",
                                    conteudo: "Solicitação de treinamento adicional para nossa equipe de vendas usar o sistema.",
                                    data_criacao: new Date(Date.now() - 7 * 24 * 60 * 60000).toISOString(),
                                    prioridade: "media",
                                    status: "fechado"
                                }
                            ]
                        };
                    
                    case 'servicos':
                        return {
                            servicos: [
                                {
                                    id: "S001",
                                    nome: "Assistente IA SDR",
                                    descricao: "Automação inteligente para prospecção, qualificação e nutrição de leads 24/7.",
                                    icone: "ia-sdr",
                                    status: "ativo",
                                    estatisticas: [
                                        {
                                            label: "Leads/Mês",
                                            valor: 83
                                        },
                                        {
                                            label: "Conversão",
                                            valor: "42%"
                                        },
                                        {
                                            label: "Tempo Resposta",
                                            valor: "2min"
                                        }
                                    ]
                                },
                                {
                                    id: "S002",
                                    nome: "Dashboards Personalizados",
                                    descricao: "Visualização de dados em tempo real com métricas e KPIs específicos para seu negócio.",
                                    icone: "dashboards",
                                    status: "ativo",
                                    estatisticas: [
                                        {
                                            label: "Métricas",
                                            valor: 24
                                        },
                                        {
                                            label: "Atualizações",
                                            valor: "15min"
                                        },
                                        {
                                            label: "Fontes",
                                            valor: 7
                                        }
                                    ]
                                },
                                {
                                    id: "S003",
                                    nome: "Automação WhatsApp",
                                    descricao: "Atendimento automático e campanhas personalizadas via WhatsApp com análise de sentimento.",
                                    icone: "whatsapp",
                                    status: "ativo",
                                    estatisticas: [
                                        {
                                            label: "Mensagens/Dia",
                                            valor: 215
                                        },
                                        {
                                            label: "Contatos",
                                            valor: 1243
                                        },
                                        {
                                            label: "Satisfação",
                                            valor: "92%"
                                        }
                                    ]
                                }
                            ]
                        };
                    
                    case 'recomendacoes':
                        return {
                            recomendacoes: [
                                {
                                    id: "R001",
                                    tipo: "acao",
                                    prioridade: "alta",
                                    titulo: "Ativar resposta automática para leads do Instagram",
                                    descricao: "Nossa análise identificou 38% de leads não respondidos do Instagram nas primeiras 2 horas.",
                                    link_acao: "#ativar-resposta"
                                },
                                {
                                    id: "R002",
                                    tipo: "oportunidade",
                                    prioridade: "media",
                                    titulo: "Expandir campanha para LinkedIn",
                                    descricao: "Perfil dos seus leads convertidos tem 73% de presença ativa no LinkedIn.",
                                    link_acao: "#expandir-linkedin"
                                },
                                {
                                    id: "R003",
                                    tipo: "alerta",
                                    prioridade: "alta",
                                    titulo: "Queda na taxa de abertura de emails",
                                    descricao: "Detectamos uma queda de 15% na taxa de abertura dos emails da campanha principal.",
                                    link_acao: "#analisar-emails"
                                }
                            ]
                        };
                    
                    default:
                        console.error(`Endpoint não reconhecido: ${endpoint}`);
                        return null;
                }
            }
            
            // Make functions available globally for event handlers
            window.loadClientStats = loadClientStats;
            window.loadCampaignChart = loadCampaignChart;
            window.loadClientTickets = loadClientTickets;
            window.loadRecommendations = loadRecommendations;
            window.loadClientServices = loadClientServices;
        });
    </script>
</body>
</html>